jQuery(function(s){var i=s("html"),o=s("body");o.on("click",'[data-action="menu"], [data-action="toc"]',function(){s(this).data("action");t(s('[data-target="'+s(this).data("target")+'"]').not("[data-action]"))});var a=!1;function t(t){a?(t.removeClass("active"),i.removeClass("menu-active"),setTimeout(function(){t.removeClass("initial"),i.removeClass("menu-initial")},300),a=!1):(i.addClass("menu-initial"),t.addClass("initial"),setTimeout(function(){i.addClass("menu-active"),t.addClass("active")},1),a=!0)}function d(){s(".menu-list-item a").each(function(){var t=s(this);t.removeClass("current"),t.attr("href")==window.location.href&&t.addClass("current")})}function c(){var t=s(".post-list .post .post-image img").length,e=0;s(".post-list .post .post-image img").each(function(){var t=s(this),a=new Image;a.src=s(this).attr("src"),a.onload=function(){e++},t.load(function(){t.parents(".post-image").css({height:"0","padding-bottom":100/t.width()*t.height()+"%"})})});var a=window.setInterval(function(){t<=e&&(window.clearInterval(a),n())},100),n=function(){var t=s(".post-list").masonry({itemSelector:".post",isAnimated:!1,gutter:0,columnWidth:1,transitionDuration:0}).imagesLoaded().always(function(){t.masonry("layout")})}}function r(){s("#wrapper").fitVids()}function l(){if("localhost"!=window.location.hostname)if("undefined"!=typeof disqus_shortname&&document.getElementById("disqus_thread")){if(window.DISQUS){s(".post-comments").show();var t=location.href;return"/"!==t.slice(-1)&&(t+="/"),DISQUS.reset({reload:!0,config:function(){this.page.identifier=t,this.page.url=t}})}s.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0}).done(function(){l()})}else s(".post-comments").hide()}function u(){s("[data-gist-id]").gist()}function m(){s('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var t=s(this);t.hasClass("rss")||(t.addClass("js-ajax-link"),-1<t.attr("href").indexOf("page")&&t.addClass("js-archive-index"),t.attr("href")==window.location.origin&&t.addClass("js-show-index"),-1<t.attr("href").indexOf("tag")&&t.addClass("js-tag-index"),-1<t.attr("href").indexOf("author")&&t.addClass("js-author-index"))})}function f(){s(".blured-image").each(function(){var t=s(this),a=new Image;a.onload=function(){t.css("background-image","url("+a.src+")").addClass("blurUp").removeClass("filter-blur-15")},a.src=t.data("src")})}o.on("click","#menu a",function(){i.hasClass("menu-active")&&t(s('[data-target="menu"]').not("[data-action]"))}),o.on("click","#tocMenu a",function(){i.hasClass("menu-active")&&t(s('[data-target="toc"]').not("[data-action]"))}),o.on("click",".overlay",function(){i.hasClass("menu-active")&&t(s('[data-target="menu"].active,[data-target="toc"].active').not("[data-action]"))}),d(),c(),r(),l(),u(),m(),f();var e=window.History,h=s("#ajax-container");if(s(document).ready(function(){var t=document.createElement("link");t.href=config.baseUrl+"css/main.css",t.rel="stylesheet",t.type="text/css",t.media="bogus",t.onload=function(){t.media="all"},document.getElementsByTagName("head")[0].appendChild(t),s("#loader-wrapper").fadeOut(300),s("#wrapper").fadeIn(800)}),!e.enabled)return!1;e.Adapter.bind(window,"statechange",function(){i.addClass("loading");var t=e.getState();s.get(t.url,function(t){var a=s(t),e=s("#ajax-container",a).contents(),n=t.match(/<title>(.*?)<\/title>/)[1];h.fadeOut(500,function(){i.hasClass("push-next")&&(i.removeClass("push-next"),i.addClass("pushed-next")),i.hasClass("push-prev")&&(i.removeClass("push-prev"),i.addClass("pushed-prev")),document.title=s("<textarea/>").html(n).text(),h.html(e),o.removeClass(),o.addClass(s("#body-class").attr("class")),NProgress.done(),h.fadeIn(500),s(document).scrollTop(0),setTimeout(function(){i.removeClass("loading")},50),c(),m(),r(),l(),u(),d(),f(),!1})})}),s("body").on("click",".js-ajax-link",function(t){}),s("body").on("click","#post-index .post .js-ajax-link",function(){var t=s(this).parents(".post");t.addClass("initial"),setTimeout(function(){t.addClass("active")},1)})});